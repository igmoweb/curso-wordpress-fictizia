<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Curso WordPress - Fictizia</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/curso-wp.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
	

				<section>
					<h1>Plugins</h1>
				</section>		

				<section>
					<h2>Conceptos básicos</h2>
					<section>
						<li>La carpeta <code>wp-content/plugins</code> es donde crearemos una subcarpeta para nuestro plugin.</li>
						<li>WordPress reconoce un plugin mediante la cabecera en el archivo principal .php del mismo.
						<pre><code>/*
* Plugin Name: Fictizia Plugin
*/</code></pre>
						</li>
						<li>Sólo con esto el plugin debería ya aparecer en la zona de adminsitración.</li>
					</section>
					<section>
						<p>La cabecera admite más información:</p>
<pre><code>/**
* Plugin Name: Fictizia Plugin
* Plugin URI: http://www.fictizia.com
* Description: Descripcion del plugin
* Version: 1.0
* Author: Ignacio
* Author URI:
* License: GPL2
*/</code></pre>
					</section>
				</section>
				<section>
				<br>
					<h3>Buenas prácticas</h3>
					<ul>
						<li>Prefijado de funciones</li>
						<li>
							Organización de ficheros:
							<ul>
								<li><strong>plugin-name.php </strong>El fichero principal</li>
								<li><strong>uninstall.php</strong> Se ejecutará cuando el plugin es desinstalado (no desactivado)</li>
								<li><strong>/js</strong> Donde guardaremos todos nuestros ficheros JS</li>
								<li><strong>/css</strong> Ficheros CSS</li>
								<li><strong>/includes</strong> otros ficheros PHP, librerías, etc.</li>
								<li><strong>/images</strong> Imágenes</li>
								<li><strong>/languages</strong> Ficheros PO para la traducción del plugin</li>
							</ul>
						</li>
					</ul>
				</section>
				<section>
					<h2>Ejercicio</h2>

					<ul>
						<li>Crea un plugin (llámale como quieras) y crea una estructura básica de carpetas tal y como hemos visto antes.</li>
						<li>Haz que el plugin muestre un “Hola Mundo” durante el action init. Simplemente utiliza un echo. Esto servirá para ver que el plugin funciona.</li>
					</ul>
				</section>

				<section>
					<h2>Localizaciones</h2>
					<section>
						<br>
						<p>A menudo necesitaremos determinar la localización de un fichero dentro de nuestro plugin, (un archivo js, una hoja de estilos o un archivo php</p>
						<p>WordPress tiene una serie de funciones para localizar ficheros dentro de un plugin. Por ejemplo:</p>
						<pre><code>plugin_dir_path( $file );</code></pre>
						<p>Donde <i>$file</i> es el nombre del fichero de nuestro plugin. Para ello se puede usar la constante PHP <code>__FILE__</code>, que devuelve el nombre y ruta del fichero actual:</p>
						<pre><code>echo plugin_dir_path( __FILE__ );</code></pre>
						<p><strong>Resultado:</strong> [...]/MAMP/htdocs/wordpress/wp-content/plugins/mi-plugin/</p>
					</section>
					<section>
						<p>Hay varias funciones que ayudan a localizar archivos dentro de una instalación de WordPress:</p>
						<ul>
							<li><strong>plugins_url()</strong> Devuelve http://ejemplo.com/wp-content/plugins</li>
							<li><strong>includes_url()</strong> Devuelve http://ejemplo.com/wp-includes</li>
							<li><strong>content_url()</strong> Devuelve http://ejemplo.com/wp-content</li>
							<li><strong>admin_url()</strong> Devuelve http://ejemplo.com/wp-admin</li>
							<li><strong>site_url()</strong> Devuelve http://ejemplo.com</li>
							<li><strong>home_url()</strong> Devuelve la página de inicio de nuestro sitio</li>
						</ul>
					</section>
					<section>
						<p>Quizás la más útil a la hora de hacer un plugin es plugin_dir_url( $filename ). Por ejemplo, si queremos utilizar una imagen dentro de nuestro plugin:</p>
<pre><code>&lt;img src=&rdquo;&lt;?php echo plugin_dir_url( __FILE__ ) . '/images/mi-imagen.jpg'; ?&gt;&rdquo; /&gt;</code></pre>
					</section>
					<section>
						<h3>Ejercicio</h3>
						<p>Crea 2 funciones para nuestro plugin:</p>
						<ul>
							<li>Una que devuelva la URL del plugin.</li>
							<li>Otra que devuelva la carpeta de nuestro plugin.</li>
						</ul>
					</section>
				</section>			

				<section>
					<h2>Activación/ Desactivación</h2>
					<section>
						<p>Las funciones de activación y desactivación son ejecutadas cuando nuestro plugin es activado o desactivado por un administrador.</p>
					</section>
					<section>
						<h3>Activación</h3>
						<pre><code>register_activation_hook( $file, $function );</code></pre>
						<p>$file es el la localización de nuestro fichero principal. Si llamamos a la función desde el mismo, podemos usar __FILE__. $funcion es el nombre de la función a ejecutar cuando se activa el plugin</p>
					</section>
					<section>
						<h3>Desactivación</h3>
						<pre><code>register_activation_hook( $file, $funcion );</code></pre>
						<p>Funciona igual que la anterior pero se ejecuta cuando el plugin se desactiva.</p>
					</section>
					<section>
<p>Las funciones de activación/desactivación pueden ser muy útiles. Cuando el plugin se activa podríamos guardar en la tabla de opciones la versión del plugin (necesario a la hora de actualizar el plugin en el futuro). También podríamos guardar un array de opciones por defecto.</p>
<p>Un uso común para la función de activación es la de crear tablas (si el plugin las necesita) en BBDD al activar el plugin.</p>
					</section>
				</section>
				<section>
					<h2>Options API</h2>
					<section>
						<p>La API de opciones es una manera simple almacenar datos en la BBDD. La API facilita el crear, acceder, actualizar y borrar opciones. </p>
						<p>Todos los datos se almacenan en la tabla wp_options wp_options bajo un nombre personalizado dado</p>
					</section>
					<section>
						<ul>
							<li><code>add_option( $option_name, $value );</code></li>
							<li><code>update_option($option_name, $value);</code></li>
							<li><code>delete_option( $option_name );</code></li>
							<li><code>get_option($option_name, $default_value);</code></li>
						</ul>
					</section>
				</section>

				<section>
					<h2>Ejercicio</h2>
					<ul>
						<li>
							Crea una función que se ejecute <u>al activar el plugin</u> y que guarde en la tabla <code>wp_options</code> la versión de nuestro plugin
						</li>
						<li>Crea otra que borre dicho dato <i>al desactivar el plugin</i></li>
					</ul>
				</section>

				<section>
					<h2>Shortcodes</h2>
				</section>

				<section>
					<h2>Creación de Widgets</h2>
				</section>

				<section>
					<h2>CPTs</h2>
				</section>

				<section>
					<h2>Taxonomías</h2>
				</section>


			</div>

			<div class="header">
           		<a href="index.html">Índice</a>
         	</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

						Reveal.configure({ slideNumber: 'c / t' });


		</script>

	</body>
</html>
